<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Muggle's Guide to Lenormand</title>

  <meta property="og:title" content="The Muggle's Guide to Lenormand">
  <meta property="og:description" content="당신의 오늘의 마법 같은 메시지를 확인해보세요. ✨">
  <meta property="og:image" content="https://hie552.github.io/the-muggles-guide-to-lenormand/mgl_b_gr.png">
  <meta property="og:url" content="https://hie552.github.io/the-muggles-guide-to-lenormand/">
  <meta name="twitter:card" content="summary_large_image">

  <style>
    @font-face {
      font-family: 'HarryPotter';
      src: url('HanryPotterDemoRegular.ttf') format('truetype');
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Noto Sans KR', 'Malgun Gothic', sans-serif;
      background-image: url('background_0.png');
      background-size: 400px;
      background-repeat: repeat;
      background-attachment: fixed;
      background-position: top left;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      overflow-x: hidden;
      position: relative;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(255, 255, 255, 0.25);
      z-index: 0;
    }

    .container {
      text-align: center;
      max-width: 480px;
      width: 90%;
      padding: 25px 15px;
      position: relative;
      z-index: 1;
    }

    h1 {
      font-family: 'HarryPotter', 'Georgia', serif;
      font-size: 2em;
      color: #2c1810;
      margin-bottom: 8px;
      text-shadow: 2px 2px 3px rgba(255,255,255,0.8), 0 0 1px rgba(0,0,0,0.3);
      font-weight: normal;
      line-height: 1.3;
      text-align: center;
      letter-spacing: 2px;
    }

    .subtitle {
      color: #5c4033;
      font-size: 0.88em;
      margin-bottom: 30px;
      font-style: italic;
      text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
      text-align: center;
    }

    .card-container {
      perspective: 1000px;
      max-width: 350px;
      margin: 0 auto 30px;
      position: relative;
    }

    .card {
      width: 100%;
      aspect-ratio: 2/3;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }

    .card.flipped { transform: rotateY(180deg); }

    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 15px;
      overflow: hidden;
    }

    .card-back, .card-front {
      position: absolute;
      width: 100%;
      height: 100%;
      background: rgba(26, 26, 46, 0.6);
      border: 3px solid rgba(212, 175, 55, 0.5);
      border-radius: 15px;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }

    .card-front { 
      transform: rotateY(180deg);
    }

    .card-face img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      border-radius: 10px;
    }

    .card-meaning {
      background: rgba(26, 26, 46, 0.95);
      color: #f0e6d2;
      padding: 20px;
      border-radius: 15px;
      border: 2px solid #d4af37;
      box-shadow: 0 5px 20px rgba(0,0,0,0.3);
      min-height: 180px;
      margin-top: 20px;
    }

    .card-meaning h2 {
      color: #d4af37;
      font-size: 1.3em;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 2px;
      font-weight: bold;
    }

    .card-meaning .keywords {
      color: #ffde77;
      font-style: italic;
      margin-bottom: 15px;
      font-size: 1.1em;
      font-weight: 600;
    }

    .card-meaning .description {
      line-height: 1.6;
      font-size: 1em;
    }

    .draw-button, .share-button, .redraw-button {
      border: none;
      border-radius: 10px;
      font-weight: bold;
      cursor: pointer;
      font-family: 'Noto Sans KR', sans-serif;
      transition: 0.3s;
      margin: 10px 5px;
      padding: 14px 35px;
      font-size: 1em;
    }

    .draw-button {
      background: linear-gradient(135deg, #d4af37, #c5a028);
      color: #1a1a2e;
    }

    .share-button {
      background: #FEE500;
      color: #000;
    }

    .redraw-button {
      background: linear-gradient(135deg, #8b7355, #6b5d52);
      color: #f0e6d2;
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 1.6em;
      }
      .subtitle {
        font-size: 0.82em;
      }
    }

    .instruction {
      color: #5c4033;
      margin-top: 10px;
      font-size: 0.9em;
      font-style: italic;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>✨ The Muggle's Guide to Lenormand ✨</h1>
    <p class="subtitle">A Daily Oracle for Wandless Witches and Wizards</p>

    <div class="card-container">
      <div class="card" id="card">
        <div class="card-face card-back">
          <img src="mgl_b_gr.png" alt="카드 뒷면">
        </div>
        <div class="card-face card-front">
          <img id="cardImage" src="" alt="카드 앞면">
        </div>
      </div>
    </div>

    <div class="card-meaning" id="cardMeaning" style="display: none;">
      <h2 id="cardTitle"></h2>
      <div class="keywords" id="cardKeywords"></div>
      <div class="description" id="cardDescription"></div>
    </div>

    <button class="draw-button" id="drawButton">카드 뽑기</button>
    <button class="share-button" id="shareButton" style="display: none;">카카오톡 공유하기</button>
    <button class="redraw-button" id="redrawButton" style="display: none;">새 카드 뽑기</button>

    <p class="instruction">카드를 탭하면 다시 뒤집을 수 있습니다</p>
  </div>

  <script>
    const cards = [
      { num: '01', name: 'RIDER', image: '01_RIDER.png',
        keywords: '소식 · 방문자 · 새로운 시작',
        meaning: '좋은 소식이나 새로운 기회가 빠르게 다가오고 있습니다. 해그리드가 해리에게 마법 세계를 소개했던 것처럼, 당신에게도 예상치 못한 반가운 소식이 찾아올 것입니다.'
      },
      { num: '02', name: 'CLOVER', image: '02_CLOVER.png',
        keywords: '행운 · 기회 · 기쁨',
        meaning: '펠릭스 펠리시스처럼 작지만 확실한 행운이 찾아옵니다. 오늘 하루 긍정적인 태도로 임한다면 예상치 못한 기회를 잡을 수 있을 것입니다.'
      },
      { num: '03', name: 'SHIP', image: '03_SHIP.png',
        keywords: '여행 · 변화 · 확장',
        meaning: '새로운 곳으로의 여행이나 큰 변화가 예고됩니다. 덤스트랭의 배가 호그와트에 도착했듯이, 당신의 삶에도 새로운 기회가 찾아올 것입니다.'
      },
      { num: '04', name: 'HOUSE', image: '04_HOUSE.png',
        keywords: '가족 · 안정 · 보호',
        meaning: '버로우처럼 따뜻하고 안정적인 시간입니다. 가족과 함께하거나 편안한 공간에서 휴식을 취하세요. 집과 관련된 좋은 일이 있을 수 있습니다.'
      },
      { num: '05', name: 'TREE', image: '05_TREE.png',
        keywords: '건강 · 성장 · 뿌리',
        meaning: '후려치는 버드나무처럼 오랜 시간 자리를 지키며 성장해온 것들에 주목하세요. 건강을 챙기고 천천히 꾸준히 나아가는 것이 중요합니다.'
      },
      { num: '06', name: 'CLOUD', image: '06_CLOUD.png',
        keywords: '혼란 · 의심 · 불확실',
        meaning: '투명 망토 아래처럼 상황이 명확하지 않습니다. 서두르지 말고 안개가 걷히기를 기다리세요. 곧 진실이 드러날 것입니다.'
      },
      { num: '07', name: 'SNAKE', image: '07_SNAKE.png',
        keywords: '갈등 · 배신 · 지혜',
        meaning: '바실리스크처럼 주의가 필요한 상황입니다. 누군가의 진짜 의도를 잘 살피고, 지혜롭게 대처하세요. 하지만 뱀은 지식의 상징이기도 합니다.'
      },
      { num: '08', name: 'COFFIN', image: '08_COFFIN.png',
        keywords: '종결 · 변화 · 전환',
        meaning: '미스터리 부서의 아치문처럼 무언가가 끝나고 새로운 것이 시작됩니다. 과거를 놓아주고 변화를 받아들일 준비를 하세요.'
      },
      { num: '09', name: 'BOUQUET', image: '09_BOUQUET.png',
        keywords: '선물 · 행복 · 초대',
        meaning: '오르키데우스 주문처럼 아름다운 선물이나 기쁜 소식이 찾아올 것입니다. 누군가의 호의나 초대를 받을 수 있습니다.'
      },
      { num: '10', name: 'SCYTHE', image: '10_SCYTHE.png',
        keywords: '갑작스러움 · 결단 · 경고',
        meaning: '사신의 낫처럼 빠르고 결정적인 순간이 다가옵니다. 중요한 결정을 내려야 할 때이며, 신중하되 과감하게 행동하세요.'
      },
      { num: '11', name: 'BROOM', image: '11_BROOM.png',
        keywords: '경쟁 · 노력 · 스포츠',
        meaning: '퀴디치 경기처럼 경쟁적이고 활동적인 시기입니다. 꾸준한 노력과 연습이 좋은 결과로 이어질 것입니다. 팀워크도 중요합니다.'
      },
      { num: '12', name: 'OWLS', image: '12_OWLS.png',
        keywords: '소통 · 메시지 · 걱정',
        meaning: '헤드위그가 편지를 전하듯 중요한 소식이나 대화가 있을 것입니다. 걱정되는 일이 있다면 주변 사람들과 소통하세요.'
      },
      { num: '13', name: 'CHILD', image: '13_CHILD.png',
        keywords: '호기심 · 새로움 · 가능성',
        meaning: '콜린 크리비처럼 순수한 호기심으로 새로운 것에 도전하세요. 작은 시작이지만 큰 가능성을 품고 있습니다.'
      },
      { num: '14', name: 'FOX', image: '14_FOX.png',
        keywords: '영리함 · 업무 · 전략',
        meaning: '코니시 픽시처럼 영리하고 전략적으로 행동해야 할 때입니다. 직장이나 업무에서 창의적인 해결책을 찾을 수 있습니다.'
      },
      { num: '15', name: 'BEAR', image: '15_BEAR.png',
        keywords: '힘 · 보호 · 리더십',
        meaning: '매드아이 무디처럼 강한 의지와 보호자로서의 역할이 필요합니다. 당신의 힘과 용기로 주변 사람들을 지켜주세요.'
      },
      { num: '16', name: 'STAR', image: '16_STAR.png',
        keywords: '소원 · 성공 · 희망',
        meaning: '불의 잔처럼 당신의 소원이 이루어질 것입니다. 꿈을 향해 나아가세요. 주목받는 순간이 다가오고 있습니다.'
      },
      { num: '17', name: 'STORK', image: '17_STORK.png',
        keywords: '변화 · 이동 · 필연',
        meaning: '천둥새처럼 큰 변화가 찾아옵니다. 이사나 직업 변경처럼 장소의 이동이 있을 수 있으며, 이는 긍정적인 변화입니다.'
      },
      { num: '18', name: 'DOG', image: '18_DOG.png',
        keywords: '우정 · 신뢰 · 충성',
        meaning: '패드풋처럼 진실한 친구가 곁에 있습니다. 믿을 수 있는 사람들과의 관계를 소중히 여기세요. 당신도 누군가의 좋은 친구가 되어주세요.'
      },
      { num: '19', name: 'TOWER', image: '19_TOWER.png',
        keywords: '권위 · 고립 · 규율',
        meaning: '교장실처럼 공식적이고 권위 있는 상황입니다. 때로는 혼자만의 시간이 필요할 수도 있습니다. 스스로를 돌아보는 시간을 가지세요.'
      },
      { num: '20', name: 'GARDEN', image: '20_GARDEN.png',
        keywords: '사교 · 모임 · 커뮤니티',
        meaning: '해그리드의 오두막처럼 사람들과의 만남이 있을 것입니다. 사회적 네트워킹이나 공공 행사에 참여해보세요.'
      },
      { num: '21', name: 'MOUNTAIN', image: '21_MOUNTAIN.png',
        keywords: '장애물 · 인내 · 시련',
        meaning: '금지된 숲처럼 극복해야 할 어려움이 있습니다. 인내심을 갖고 천천히 나아가세요. 정상에 오르면 큰 보상이 기다립니다.'
      },
      { num: '22', name: 'CROSSROAD', image: '22_CROSSROAD.png',
        keywords: '선택 · 결정 · 분기점',
        meaning: '움직이는 계단처럼 중요한 선택의 순간입니다. 각 길을 신중히 살펴보고 당신의 직관을 믿으세요.'
      },
      { num: '23', name: 'MICE', image: '23_MICE.png',
        keywords: '손실 · 스트레스 · 걱정',
        meaning: '스캐버스처럼 보이지 않는 곳에서 문제가 생길 수 있습니다. 작은 일들이 쌓이지 않도록 미리미리 해결하세요.'
      },
      { num: '24', name: 'HEART', image: '24_HEART.png',
        keywords: '사랑 · 열정 · 감정',
        meaning: '아모텐시아처럼 강한 감정이 솟아오릅니다. 마음이 이끄는 대로 따라가세요. 사랑하는 사람에게 마음을 표현하기 좋은 때입니다.'
      },
      { num: '25', name: 'RING', image: '25_RING.png',
        keywords: '약속 · 계약 · 영원',
        meaning: '곤트의 반지처럼 중요한 약속이나 계약이 있을 것입니다. 관계의 헌신이나 비즈니스 계약에 신중하세요.'
      },
      { num: '26', name: 'BOOK', image: '26_BOOK.png',
        keywords: '지식 · 비밀 · 학습',
        meaning: '괴물 책처럼 배워야 할 것이 있습니다. 숨겨진 정보나 진실이 드러날 수 있으니, 공부하고 연구하는 시간을 가지세요.'
      },
      { num: '27', name: 'LETTER', image: '27_LETTER.png',
        keywords: '문서 · 통보 · 소식',
        meaning: '호그와트 입학통지서처럼 중요한 문서나 공식적인 소식이 도착합니다. 이메일이나 서류를 꼼꼼히 확인하세요.'
      },
      { num: '28', name: 'MAN', image: '28_MAN.png',
        keywords: '남성 · 의지 · 활동',
        meaning: '론 위즐리처럼 의리 있고 용감한 에너지가 필요합니다. 적극적으로 행동하고, 친구들을 위해 나서세요.'
      },
      { num: '29', name: 'WOMAN', image: '29_WOMAN.png',
        keywords: '여성 · 지혜 · 감수성',
        meaning: '헤르미온느처럼 지혜롭고 섬세하게 접근하세요. 감정을 인정하고 직관을 믿으면서도 논리적으로 생각하세요.'
      },
      { num: '30', name: 'LILY', image: '30_LILY.png',
        keywords: '순수함 · 지혜 · 아름다움',
        meaning: '로웨나 래번클로처럼 지혜롭고 창의적인 시기입니다. 순수한 마음으로 아름다운 것들을 창조하세요.'
      },
      { num: '31', name: 'SUN', image: '31_SUN.png',
        keywords: '성공 · 생명력 · 행복',
        meaning: '불사조 퍽스처럼 밝은 미래와 확실한 성공이 보장됩니다. 자신감을 갖고 긍정적인 에너지로 하루를 시작하세요.'
      },
      { num: '32', name: 'MOON', image: '32_MOON.png',
        keywords: '직관 · 인정 · 감정',
        meaning: '패트로누스처럼 당신의 직관을 믿으세요. 보이지 않는 것들에 주목하고, 감정의 흐름을 따라가세요.'
      },
      { num: '33', name: 'KEY', image: '33_KEY.png',
        keywords: '해결 · 기회 · 자유',
        meaning: '날개 달린 열쇠처럼 문제의 해답을 찾았습니다. 확실하고 긍정적인 결과가 보장됩니다. 새로운 문이 열릴 것입니다.'
      },
      { num: '34', name: 'FISH', image: '34_FISH.png',
        keywords: '금전 · 풍요 · 흐름',
        meaning: '니플러처럼 재정적 풍요가 찾아옵니다. 돈의 흐름이 좋아지고, 가치 있는 것들을 발견할 수 있습니다.'
      },
      { num: '35', name: 'ANCHOR', image: '35_ANCHOR.png',
        keywords: '안정 · 목표 · 확실함',
        meaning: '호그와트처럼 안정적이고 오래 지속되는 상황입니다. 목표를 향해 꾸준히 나아가세요. 당신은 안전한 곳에 있습니다.'
      },
      { num: '36', name: 'CROSS', image: '36_CROSS.png',
        keywords: '운명 · 책임 · 희생',
        meaning: '살아남은 아이처럼 무거운 책임이지만 이는 당신의 운명입니다. 강한 정신력으로 이겨내면 위대한 승리가 기다립니다.'
      }
    ];

    const card = document.getElementById('card');
    const cardImage = document.getElementById('cardImage');
    const cardMeaning = document.getElementById('cardMeaning');
    const cardTitle = document.getElementById('cardTitle');
    const cardKeywords = document.getElementById('cardKeywords');
    const cardDescription = document.getElementById('cardDescription');
    const drawButton = document.getElementById('drawButton');
    const shareButton = document.getElementById('shareButton');
    const redrawButton = document.getElementById('redrawButton');

    let isFlipped = false;
    let currentCard = null;

    function drawCard() {
      const random = Math.floor(Math.random() * cards.length);
      currentCard = cards[random];
      cardImage.src = currentCard.image;
      cardTitle.textContent = `${currentCard.num}. ${currentCard.name}`;
      cardKeywords.textContent = currentCard.keywords;
      cardDescription.textContent = currentCard.meaning;

      setTimeout(() => {
        card.classList.add('flipped');
        cardMeaning.style.display = 'block';
        drawButton.style.display = 'none';
        shareButton.style.display = 'inline-block';
        redrawButton.style.display = 'inline-block';
        isFlipped = true;
      }, 300);
    }

    function resetCard() {
      card.classList.remove('flipped');
      cardMeaning.style.display = 'none';
      drawButton.style.display = 'inline-block';
      shareButton.style.display = 'none';
      redrawButton.style.display = 'none';
      isFlipped = false;
    }

    function redrawCard() {
      resetCard();
      setTimeout(drawCard, 600);
    }

    drawButton.addEventListener('click', drawCard);
    redrawButton.addEventListener('click', redrawCard);
    card.addEventListener('click', () => { if (isFlipped) resetCard(); });

    shareButton.addEventListener('click', async () => {
      if (!currentCard) return;

      // 현재 날짜를 한국 시간대로 가져오기
      const today = new Date();
      const koreaTime = new Date(today.getTime() + (9 * 60 * 60 * 1000)); // UTC+9
      const year = koreaTime.getUTCFullYear();
      const month = String(koreaTime.getUTCMonth() + 1).padStart(2, '0');
      const day = String(koreaTime.getUTCDate()).padStart(2, '0');
      const dateStr = `${year}.${month}.${day}`;

      const shareText =
        `📰 Daily Prophet for ${dateStr}\n\n` +
        `🔮 오늘의 카드: ${currentCard.num}. ${currentCard.name}\n` +
        `${currentCard.keywords}\n\n` +
        `${currentCard.meaning}\n\n` +
        `✨ 더 보러가기:\nhttps://hie552.github.io/the-muggles-guide-to-lenormand/`;

      // 모바일: 네이티브 공유 기능
      if (navigator.share) {
        try {
          await navigator.share({
            title: `오늘의 카드 - ${currentCard.name}`,
            text: shareText,
            url: 'https://hie552.github.io/the-muggles-guide-to-lenormand/',
          });
        } catch (err) {
          console.log('공유 취소됨');
        }
      } 
      // PC: 클립보드 복사
      else {
        try {
          await navigator.clipboard.writeText(shareText);
          alert('결과가 복사되었습니다! 카카오톡에 붙여넣어 공유하세요 💛');
        } catch (err) {
          // 클립보드 API 실패 시 대체 방법
          const textArea = document.createElement('textarea');
          textArea.value = shareText;
          textArea.style.position = 'fixed';
          textArea.style.left = '-999999px';
          document.body.appendChild(textArea);
          textArea.select();
          try {
            document.execCommand('copy');
            alert('결과가 복사되었습니다! 카카오톡에 붙여넣어 공유하세요 💛');
          } catch (err2) {
            alert('복사에 실패했습니다. 수동으로 복사해주세요.');
          }
          document.body.removeChild(textArea);
        }
      }
    });
  </script>
</body>
</html>
